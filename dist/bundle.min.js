var LenaJS=function(t){"use strict";const a=function(t){return t<0?0:t>255?255:t},e=function(t,a){for(let e=0;e<t.data.length;e+=4){let n=.2126*t.data[e]+.7152*t.data[e+1]+.0722*t.data[e+2],r=a||128;t.data[e]=t.data[e+1]=t.data[e+2]=n>r?255:0}return t},n=function(t,a){let e=Math.round(Math.sqrt(a.length)),n=Math.floor(e/2),r=t.data,d=t.width,o=t.height,i=document.createElement("canvas").getContext("2d").createImageData(d,o);for(let t=0;t<o;t++)for(let u=0;u<d;u++){let l=4*(t*d+u),h=0,c=0,f=0;for(let i=0;i<e;i++)for(let l=0;l<e;l++){let g=t+i-n,s=u+l-n;if(g>=0&&g<o&&s>=0&&s<d){let t=4*(g*d+s),n=a[i*e+l];h+=r[t]*n,c+=r[t+1]*n,f+=r[t+2]*n}}i.data[l]=h,i.data[l+1]=c,i.data[l+2]=f,i.data[l+3]=255}return i},r=function(t){return n(t,[0,-1,0,-1,4,-1,0,-1,0])},d=function(t){return t=n(t,[1/4,0,-1/4,.5,0,-.5,1/4,0,-1/4])},o=function(t){return t=n(t,[1/4,.5,1/4,0,0,0,-1/4,-.5,-1/4])},i=function(t){return n(t,[2/159,4/159,5/159,4/159,2/159,4/159,9/159,12/159,9/159,4/159,5/159,12/159,15/159,12/159,5/159,4/159,9/159,12/159,9/159,4/159,2/159,4/159,5/159,4/159,2/159])},u=function(t,a){t.width=a.width,t.height=a.height;t.getContext("2d").putImageData(a,0,0)},l=function(t){var a=document.createElement("canvas");a.width=t.width,a.height=t.height;var e=a.getContext("2d");return e.drawImage(t,0,0),e.getImageData(0,0,t.width,t.height)};return t.bigGaussian=i,t.blue=function(t){let a=t.data;for(let t=0;t<a.length;t+=4)a[t]=0,a[t+1]=0;return t},t.brightness=function(t,e=0){let{data:n}=t;const r=Math.floor(e/100*255);for(let t=0;t<n.length;t+=4)n[t]=a(n[t]+r),n[t+1]=a(n[t+1]+r),n[t+2]=a(n[t+2]+r);return t},t.canny=function(t){t=i(t);const a=function(t,a){let e=t.data,n=t.width,r=t.height,d=a.data,o=document.createElement("canvas").getContext("2d").createImageData(n,r),i=new Array(e.length).fill(0);for(let t=0;t<r;t++)for(let a=0;a<n;a++){let r=4*(t*n+a);o.data[r]=Math.sqrt(Math.pow(e[r],2)+Math.pow(d[r],2)),o.data[r+1]=Math.sqrt(Math.pow(e[r+1],2)+Math.pow(d[r+1],2)),o.data[r+2]=Math.sqrt(Math.pow(e[r+2],2)+Math.pow(d[r+2],2)),o.data[r+3]=255,i[r]=Math.atan2(d[r],e[r]),i[r+1]=Math.atan2(d[r+1],e[r+1]),i[r+2]=Math.atan2(d[r+2],e[r+2]),i[r+3]=255}return{magnitude:o,direction:i}}(o(t),d(t));return t=function(t,a){let e=Math.round(Math.sqrt(25)),n=Math.floor(e/2),r=t.data,d=t.width,o=t.height,i=document.createElement("canvas").getContext("2d").createImageData(d,o);for(var u=0;u<o;u++)for(var l=0;l<d;l++){for(var h=4*(u*d+l),c=r[h],f=r[h+1],g=r[h+2],s=0;s<e;s++)for(var m=0;m<e;m++){var M=u+s-n,w=l+m-n;if(M>=0&&M<o&&w>=0&&w<d){var p=4*(M*d+w),v=Math.atan2(M-u,w-l);c=r[p]*Math.abs(Math.cos(a[h]-v))>c?0:c,f=r[p+1]*Math.abs(Math.cos(a[h+1]-v))>f?0:f,g=r[p+2]*Math.abs(Math.cos(a[h+2]-v))>g?0:g}}i.data[h]=2*c,i.data[h+1]=2*f,i.data[h+2]=2*g,i.data[h+3]=255}return i}(r(t),a.direction),e(t,8)},t.filterImage=function(t,a,e,n=0){var r=[l(e),n];return u(t,a.apply(null,r))},t.gaussian=function(t){return n(t,[1/16,2/16,1/16,2/16,.25,2/16,1/16,2/16,1/16])},t.getImage=l,t.grayscale=function(t){for(let a=0;a<t.data.length;a+=4){let e=t.data[a],n=t.data[a+1],r=t.data[a+2];t.data[a]=t.data[a+1]=t.data[a+2]=.2126*e+.7152*n+.0722*r}return t},t.green=function(t){let a=t.data;for(var e=0;e<a.length;e+=4)a[e]=0,a[e+2]=0;return t},t.highpass=function(t){return n(t,[-1,-1,-1,-1,8,-1,-1,-1,-1])},t.histogram=function(t){const a=this.getImage(t),e=new Array(257).join("0").split("");let n={r:e.map(Number),g:e.map(Number),b:e.map(Number)};for(let t=0;t<a.data.length;t+=4)n.r[a.data[t]]++,n.g[a.data[t+1]]++,n.b[a.data[t+2]]++;return n},t.invert=function(t){for(let a=0;a<t.data.length;a+=4)t.data[a]=255-t.data[a],t.data[a+1]=255-t.data[a+1],t.data[a+2]=255-t.data[a+2];return t},t.laplacian=r,t.lowpass3=function(t){const a=1/9;return n(t,[a,a,a,a,a,a,a,a,a])},t.lowpass5=function(t){const a=.04;return n(t,[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a])},t.mirror=function(t){let a=[];const e=4*t.width;for(let n=0;n<t.height;n++){let r=n*e,d=t.width/2;for(let n=0;n<d;n++){let d=4*n,o=d+r,i=e-d-4+r;a[0]=t.data[o],a[1]=t.data[o+1],a[2]=t.data[o+2],a[3]=t.data[o+3],t.data[o]=t.data[i],t.data[o+1]=t.data[i+1],t.data[o+2]=t.data[i+2],t.data[o+3]=t.data[i+3],t.data[i]=a[0],t.data[i+1]=a[1],t.data[i+2]=a[2],t.data[i+3]=a[3]}}return t},t.prewittHorizontal=function(t){return n(t,[1/3,1/3,1/3,0,0,0,-1/3,-1/3,-1/3])},t.prewittVertical=function(t){return n(t,[-1/3,0,1/3,-1/3,0,1/3,-1/3,0,1/3])},t.printCanvas=u,t.red=function(t){let a=t.data;for(let t=0;t<a.length;t+=4)a[t]=a[t],a[t+1]=0,a[t+2]=0;return t},t.redrawCanvas=function(t,a){let e=t.getContext("2d");return e=[e.getImageData(0,0,t.width,t.height)],u(t,a.apply(null,e))},t.roberts=function(t){return n(t,[0,0,0,1,-1,0,0,0,0])},t.saturation=function(t){for(let a=0;a<t.data.length;a+=4)t.data[a]=2.31366*t.data[a]+-1.15596*t.data[a+1]+-.1558*t.data[a+2],t.data[a+1]=-.58634*t.data[a]+1.7440399999999998*t.data[a+1]+-.1558*t.data[a+2],t.data[a+2]=-.58634*t.data[a]+-1.15596*t.data[a+1]+(2.9-.1558)*t.data[a+2];return t},t.sepia=function(t){for(let a=0;a<t.data.length;a+=4){let e=t.data[a],n=t.data[a+1],r=t.data[a+2];t.data[a]=t.data[a+1]=t.data[a+2]=.3*e+.59*n+.11*r,t.data[a]+=40,t.data[a+1]+=20,t.data[a+2]-=20}return t},t.sharpen=function(t){return n(t,[0,-.2,0,-.2,1.8,-.2,0,-.2,0])},t.sobelHorizontal=o,t.sobelVertical=d,t.thresholding=e,t}({});
